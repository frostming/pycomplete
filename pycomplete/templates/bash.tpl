# BASH completion script for %{script_name}
# Generated by pycomplete %{version}

%{function}()
{
    local cur script coms opts com prev choices
    COMPREPLY=()
    _get_comp_words_by_ref -n : cur prev words

    # for an alias, get the real script behind it
    if [[ $(type -t ${words[0]}) == "alias" ]]; then
        script=$(alias ${words[0]} | sed -E "s/alias ${words[0]}='(.*)'/\\1/")
    else
        script=${words[0]}
    fi

    # lookup for command
    for word in ${words[@]:1}; do
        if [[ $word != -* ]]; then
            com=$word
            break
        fi
    done

    # completing for an option
    if [[ ${cur} == --* ]] ; then
        opts="%{opts}"

        case "$com" in

%{command_list}

        esac

        COMPREPLY=($(compgen -W "${opts}" -- ${cur}))
        __ltrim_colon_completions "$cur"

        return 0;
    fi

    # completing for a choice
    case "$prev" in

%{option_list}

    esac

    if [[ ! -z "$choices" ]]; then
        COMPREPLY=( $(compgen -W "$choices" -- ${cur}) )
        return 0
    fi

    # completing for a command
    if [[ $cur == $com ]]; then
        coms="%{coms}"

        COMPREPLY=($(compgen -W "${coms}" -- ${cur}))
        __ltrim_colon_completions "$cur"

        return 0
    fi
}

%{compdefs}
